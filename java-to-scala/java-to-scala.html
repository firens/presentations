<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Java to Scala</title>

    <meta name="description" content="Using a Java recipe for a Scala cake">
    <meta name="author" content="Samuel Durand">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="../revealjs/css/reveal.css">
    <link rel="stylesheet" href="../revealjs/css/theme/black.css" id="theme">
    <link rel="stylesheet" href="css/java-to-scala.css"/>

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../revealjs/lib/css/zenburn.css">

    <!--[if lt IE 9]>
    <script src="../revealjs/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <div class="slides">
        <section>
            <h1 style="text-transform: none; font-size: 1.8em">How to make a Scala cake</h1>
            <h2 style="text-transform: none; font-size: 1.2em; color: darkgrey">For experienced Java bakers</h2>
            <img class="logo" src="img/cake.jpg" style="width: 49%; margin-top: 40px"/>
            <p style="margin-top: 1em">
                <small>Presentation by Samuel Durand (<a href="https://github.com/samudurand">github.com/samudurand</a>)</small>
            </p>
        </section>

        <section>
            <h2 style="margin-bottom: 1em">Why switch to Scala ?</h2>
            <div style="display: inline-block;">
                <ul>
                    <li>Type safety</li>
                    <li>Type inference</li>
                    <li>Powerful compiler</li>
                    <li>Utilities</li>
                    <li>OOP + FP</li>
                    <li>Unique patterns</li>
                    <li>Much more concise</li>
                    <li>Java compatible</li>
                </ul>
            </div>
            <div style="display: inline-block; vertical-align: top; margin-top: 8%">
                <img class="logo" style="width: 30%;" src="img/scala-spiral-3d-2-toned-down.png"/>
            </div>
        </section>

        <section>
            <section>
                <h2 style="margin-bottom: 1em">Java to Scala basics</h2>
            </section>

            <section>
                <h2 style="margin-bottom: 1em">Defining a simple class</h2>
                
                <p>Java</p>
                <pre style="font-size: 0.4em;"><code data-trim class="java">
public class Cake {
    private name;
    
    public Cake(String name) {
        this.name = name;
    }
    
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
}

Cake brownie = new Cake("Brownie");
                </code></pre>

                <div class="fragment">
                    <p>Scala</p>
                    <pre style="font-size: 0.4em;"><code data-trim class="scala">
case class Cake(name: String)

val brownie = Cake("Brownie")
                    </code></pre>
                </div>
            </section>
            <section>
                <h2 style="margin-bottom: 1em">Collections</h2>
                
                <p>Java</p>
                <pre style="font-size: 0.4em;"><code data-trim class="java">
List&lt;Cake&gt; cakes = new LinkedList&lt;&gt;();

List&lt;Cake&gt; cakes = Arrays.asList(new Cake("Brownie"), new Cake("Blondie"));
                </code></pre>

                <div class="fragment">
                    <p>Scala</p>
                    <pre style="font-size: 0.4em;"><code data-trim class="scala">
val cakes = List[Cake]()

val cakes = List(Cake("Brownie"), Cake("Blondie"))

val cakes_list_as_java = cakes.asJava
                    </code></pre>
                </div>
            </section>
            <section>
                <h2 style="margin-bottom: 1em">Functions and loops</h2>
                
                <p>Java</p>
                <pre style="font-size: 0.4em;"><code data-trim class="java">
public List&lt;Slice&gt; pickASliceFromEach(List&lt;Cake&gt; cakes) {
    List&lt;Slice&gt; slices = new ArrayList&lt;Slice&gt;();  
    for (Cake c: cakes) {
        slices.add(c.takeOneSlice());
    }
    return slices;
}
                </code></pre>

                <div class="fragment">
                    <p>Scala</p>
                    <pre style="font-size: 0.4em;"><code data-trim class="scala">
def pickASliceFromEach(cakes: List[Cake]) = cakes.map(_.takeOneSlice())

def pickASliceFromEachV2(cakes: List[Cake]) = for(cake &lt;- cakes) yield cake.takeOneSlice()
                    </code></pre>
                </div>
            </section>
        </section>

        <section>
            <section>
                <h2 style="margin-bottom: 1em">OOP to FP + OOP</h2>
                <ul>
                    <li style="list-style: none;">Yes scala is a FP language...
                        <ul style="padding-top: 0.5em; ">
                            <li style="font-size: 0.9em;">Functions as first class citizens</li>
                            <li style="font-size: 0.9em;">Immutability: no change, but copy</li>
                            <li style="font-size: 0.9em;">No side effects</li>
                            <li style="font-size: 0.9em;">.map , .filter...</li>
                            <li style="font-size: 0.9em;">Recursion instead of loops</li>
                        </ul>
                    </li>
                </ul>

            </section>
            <section>
                <h2 style="margin-bottom: 1em">OOP to FP + OOP</h2>
                <ul>
                    <li style="list-style: none;">... but it also has OOP !
                        <ul style="padding-top: 0.5em; ">
                            <li style="font-size: 0.9em;">Java Objects</li>
                            <li style="font-size: 0.9em;">Classes, methods, properties</li>
                            <li style="font-size: 0.9em;">This reference</li>
                            <li style="font-size: 0.9em;">Inheritance</li>
                            <li style="font-size: 0.9em;">Polymorphisme (Traits)</li>
                        </ul>
                    </li>    
                </ul>
            </section>
        </section>

        <section>
            <h2 style="margin-bottom: 1em">Rely on type inference</h2>

            <pre style="font-size: 0.4em;"><code data-trim class="scala">
val cakeName = "Brownie"	// String

val cakeCount = 5 * 3 - 4	// Int
val sliceSize = 5.35		// Double

val cakes = List(Pie("Pecan pie", sweetness=5), Cupcake("Muffin", sweetness=10)) // List[Cake]

def makeCake(name: String, sugarAmount: Double) = {	// return type is Cake
  val sweetness = (sugarAmount / 5).toInt
  Cake(name, sweetness)
}
            </code></pre>

            <div class="fragment">
                <p>More advanced inferences</p>
                <pre style="font-size: 0.4em;"><code data-trim class="scala">
// Infer the type of T and the return type based on the List type 
def getRandomSweet[T](sweets: List[T]) = sweets(rand.nextInt(sweets.length))
// --> return type T

val myFutureCakes = shopCakes.map(_.reverseEngineerRecipe().map(_.bakeCake()))
// --> return type List[Future[Future[Cake]]]

                </code></pre>
            </div>

        </section>

        <section>
            <h2 style="margin-bottom: 1em">Prefer Immutability</h2>

            <p>Java</p>

            <pre style="font-size: 0.4em;"><code data-trim class="java">
Cake creamCake = new Cake("Cream cake")
List cakes = new ArrayList();
cakes.add(creamCake)
cakes.remove(creamCake)
            </code></pre>

            <div class="fragment">
                <p>Scala</p>

                <pre style="font-size: 0.4em;"><code data-trim class="scala">
val panettone = new Cake("Panettone")
val cakes = List(panettone)
val cakesWithMuffin = Cake("Muffin") :: cakes
val cakesWithoutMuffin = cakesWithMuffin.filter(_.name != "Muffin")
                </code></pre>

                <p>Make your variables immutable, unless thereâ€™s a good reason not to.</p>
            </div>

        </section>

        <section>
            <h2 style="margin-bottom: 1em">Enjoy the Utilities</h2>

            <p>Strings: 100+ manipulation methods</p>
            
            <pre style="font-size: 0.4em;"><code data-trim class="scala">
val cakeStr = "madeleine"
cakeStr.reverse()               // "enieledam"
cakeStr.toUpperCase()           // "MADELEINE"
cakeStr.replaceAll("e", "a")    // "madalaina"
            </code></pre>

            <p>Collections: 40+ list manipulation methods</p>
            
            <pre style="font-size: 0.4em;"><code data-trim class="scala">
val aLotOfBiscuits = List.fill(10)("biscuit")
aLotOfBiscuits.head     // "biscuit"
aLotOfBiscuits.tail     // "biscuit"
aLotOfBiscuits.reverse
            </code></pre>

        </section>

        <section>
            <h2 style="margin-bottom: 1em">Use Options instead of Nulls</h2>

            <pre style="font-size: 0.4em;"><code data-trim class="java">
Cake pecanPie = new Cake("Pecan pie", slices=2)
Slice slice1 = pecanPie.takeASlice()
Slice slice2 = pecanPie.takeASlice()
Slice slice3 = pecanPie.takeASlice()    // = Null since there is no slice left
slice3.eat()                            // Runtime Null pointer exception
            </code></pre>

            <div class="fragment">
                <p>Scala</p>

                <pre style="font-size: 0.4em;"><code data-trim class="java">
val pecanPie = Cake("Pecan pie", slices=2)
val (slice1, pecanPie2) = pecanPie.takeASlice() // Tuple[Option[Slice], Cake]
val (_, pecanPie3) = pecanPie2.takeAslice()
val (slice3, _) = pecanPie3.takeAslice()
slice3.eat()                                    // Compiler error ! 
slice3.map {
    case Some(slice) => slice.eat()
    case None        => println("I am still hungry !")
}
                </code></pre>
            </div>
        </section>

        <section>
                <h2 style="margin-bottom: 1em">Traits</h2>

                <pre style="font-size: 0.4em;"><code data-trim class="scala">
trait Cake {
    val goodForDays = 3
    val name: String
    val slices: Int
    def takeASlice(): Cake
    override def toString() = s"A yummy ${name}, with ${slices} slices"
}

trait Pie {
    val weight: Int
    val sliceWeight: Int
}

case class LayeredCake(name: String, slices: Int, layers: Int = 3) extends Cake {
    def takeASlice() = this.copy(slices=slices-1)
}

case class PecanPie(name: String,
                    slices: Int, 
                    weight: Int, 
                    sliceWeight: Int) extends Cake with Pie {
    def takeASlice() = this.copy(slices=slices-1, weight=weight-sliceWeight)
}
                </code></pre>                
        </section>

        <section>
            <h2 style="margin-bottom: 1em">Use pattern matching</h2>

            <pre style="font-size: 0.4em;"><code data-trim class="scala">
def findOutWhatItIs(mysteryValue: Any) = 
    mysteryValue match {
        case "Lemon pie" =>                         println("Hurray ! A lemon pie !!")
        case cakeName: String =>                    println(s"Found it, it's a ${cakeName}")
        case sliceCount: Int if sliceCount > 10 =>  println("It's gonna be a huge cake !!") 				
        case sliceCount: Int => 		    println("Only a small cake...") 				
    }

def findOutWhatSweetItIs(mysteryCake: Sweet) = 
    mysteryCake match {
        case p: Pie =>			    println("It's not lemon but it's still a pie !")
        case LayeredCake(_, _, layers) =>   println(s"It has ${layers} layers")
        case _: Cake =>			    println("I don't know which, but it is a cake")
}
            </code></pre>

        </section>

        <section>
            <h2>Any questions ?</h2>
        </section>

    </div>

</div>

<script src="../revealjs/lib/js/head.min.js"></script>
<script src="../revealjs/js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'convex', // none/fade/slide/convex/concave/zoom

        dependencies: [
            {
                src: '../revealjs/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: '../revealjs/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: '../revealjs/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: '../revealjs/plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: '../revealjs/plugin/zoom-js/zoom.js', async: true},
            {src: '../revealjs/plugin/notes/notes.js', async: true}
        ]
    });

</script>

</body>
</html>
